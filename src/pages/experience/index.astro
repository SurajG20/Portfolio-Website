---
import { getCollection } from "astro:content";
import BaseLayout from "../../components/layout/BaseLayout.astro";
import BaseHero from "../../components/shared/BaseHero.astro";
import Container from "../../components/ui/Container.astro";
import ContentList from "../../components/shared/ContentList.astro";
import ExperienceCard from "../../components/shared/ExperienceCard.astro";

const experiences = await getCollection("experience");

const sortedExperiences = experiences.sort((a, b) => b.data.startDate.getTime() - a.data.startDate.getTime());
---

<BaseLayout title="Experience" description="My professional experience and work history">
  <Container>
    <BaseHero title="Experience" description="My professional experience and work history" />
    <ContentList>
      {
        sortedExperiences.map((experience) => (
          <ExperienceCard
            title={experience.data.title}
            description={experience.data.description}
            url={experience.data.url}
            logo={experience.data.logo}
            startDate={experience.data.startDate}
            endDate={experience.data.endDate}
            current={experience.data.current}
            isExternal={true}
          />
        ))
      }
    </ContentList>
  </Container>
</BaseLayout>
